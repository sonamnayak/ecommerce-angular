{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { ProductsDataService } from 'src/app/services/products-data.service';\nlet ProductDetailComponent = class ProductDetailComponent {\n  constructor(productsDataService, activatedRoute, cartService, router, wishlist) {\n    this.productsDataService = productsDataService;\n    this.activatedRoute = activatedRoute;\n    this.cartService = cartService;\n    this.router = router;\n    this.wishlist = wishlist;\n    this.value = 1;\n    this.currentSize = \"XS\";\n    this.currentColor = \"black\";\n    this.unique = true;\n  }\n  ngOnInit() {\n    this.productId = this.activatedRoute.snapshot.paramMap.get('id');\n    this.productsDataService.getProduct(this.productId).subscribe(res => this.product = res);\n  }\n  decreaseValue() {\n    if (this.value > 1) this.value--;\n  }\n  increaseValue() {\n    if (this.value < 10) this.value++;\n  }\n  getSize(size) {\n    this.currentSize = size.value;\n  }\n  getColor(color) {\n    this.currentColor = color.value.toLowerCase();\n  }\n  addToCart(product) {\n    // for (let i = 1; i <= localStorage.length; i++) {\n    //   this.data = localStorage.getItem(i.toString())\n    //   if (this.data != null) {\n    //     this.parsedData = JSON.parse(this.data)\n    //     if (this.parsedData.id === product.id) {\n    //       this.unique = false\n    //       break\n    //     }\n    //     else this.unique = true\n    //   }\n    // }\n    // if (this.unique) localStorage.setItem((localStorage.length).toString(), JSON.stringify({ id: product.id, img: product.img, title: product.title, price: product.price * this.value, color: this.currentColor, size: this.currentSize, quantity: this.value }))\n    this.cartService.addToCart({\n      img: product.img,\n      title: product.title,\n      price: product.price * this.value,\n      color: this.currentColor,\n      size: this.currentSize,\n      quantity: this.value\n    }).subscribe(res => {\n      if (res.status === 200) this.router.navigate(['/cart']);\n    });\n  }\n  addToWishlist(product) {\n    // for (let i = 0; i < sessionStorage.length; i++) {\n    //   this.data = sessionStorage.getItem(i.toString())\n    //   this.parsedData = JSON.parse(this.data)\n    //   if (this.parsedData.id === product.id) {\n    //     this.unique = false\n    //     break\n    //   }\n    //   else this.unique = true\n    // }\n    // if (this.unique) sessionStorage.setItem((sessionStorage.length).toString(), JSON.stringify({ id: product.id, img: product.img, title: product.title, price: product.price * this.value, color: this.currentColor, size: this.currentSize, quantity: this.value }))\n    this.wishlistService.addToWishlist({\n      img: product.img,\n      title: product.title,\n      price: product.price,\n      color: \"black\",\n      size: \"S\",\n      quantity: 1\n    }).subscribe(res => {\n      if (res.status === 200) this.router.navigate(['/wishlist']);\n    });\n  }\n};\nProductDetailComponent = __decorate([Component({\n  selector: 'app-product-detail',\n  templateUrl: './product-detail.component.html',\n  styleUrls: ['./product-detail.component.css'],\n  providers: [ProductsDataService]\n})], ProductDetailComponent);\nexport { ProductDetailComponent };","map":{"version":3,"names":["Component","ProductsDataService","ProductDetailComponent","constructor","productsDataService","activatedRoute","cartService","router","wishlist","value","currentSize","currentColor","unique","ngOnInit","productId","snapshot","paramMap","get","getProduct","subscribe","res","product","decreaseValue","increaseValue","getSize","size","getColor","color","toLowerCase","addToCart","img","title","price","quantity","status","navigate","addToWishlist","wishlistService","__decorate","selector","templateUrl","styleUrls","providers"],"sources":["C:\\Users\\shinz\\OneDrive\\Desktop\\web\\ecommerce\\client\\src\\app\\home\\product-detail\\product-detail.component.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { ProductsData } from 'src/app/models/products-data.model';\nimport { CartService } from 'src/app/services/cart.service';\nimport { ProductsDataService } from 'src/app/services/products-data.service';\n\n@Component({\n  selector: 'app-product-detail',\n  templateUrl: './product-detail.component.html',\n  styleUrls: ['./product-detail.component.css'],\n  providers: [ProductsDataService]\n})\nexport class ProductDetailComponent implements OnInit {\n  constructor(private productsDataService: ProductsDataService, private activatedRoute: ActivatedRoute, private cartService: CartService, private router: Router, private wishlist) { }\n  product!: { img: string, cat: string, title: string, price: number, desc: string, colors: Array<string>, sizes: Array<string>, bestseller: boolean } | undefined\n  productId: any\n  value: number = 1\n  currentProduct: any\n  currentSize: string = \"XS\"\n  currentColor: string = \"black\"\n  data!: any\n  parsedData!: any\n  unique: boolean = true\n  ngOnInit() {\n    this.productId = this.activatedRoute.snapshot.paramMap.get('id')\n    this.productsDataService.getProduct(this.productId).subscribe(res => this.product = res)\n  }\n\n  decreaseValue() {\n    if (this.value > 1) this.value--\n  }\n\n  increaseValue() {\n    if (this.value < 10) this.value++\n  }\n\n  getSize(size: HTMLSelectElement) {\n    this.currentSize = size.value\n  }\n  getColor(color: HTMLInputElement) {\n    this.currentColor = color.value.toLowerCase()\n  }\n\n  addToCart(product: ProductsData) {\n    // for (let i = 1; i <= localStorage.length; i++) {\n    //   this.data = localStorage.getItem(i.toString())\n    //   if (this.data != null) {\n    //     this.parsedData = JSON.parse(this.data)\n    //     if (this.parsedData.id === product.id) {\n    //       this.unique = false\n    //       break\n    //     }\n    //     else this.unique = true\n    //   }\n    // }\n    // if (this.unique) localStorage.setItem((localStorage.length).toString(), JSON.stringify({ id: product.id, img: product.img, title: product.title, price: product.price * this.value, color: this.currentColor, size: this.currentSize, quantity: this.value }))\n    this.cartService.addToCart({ img: product.img, title: product.title, price: product.price * this.value, color: this.currentColor, size: this.currentSize, quantity: this.value }).subscribe(res => {\n      if(res.status === 200) this.router.navigate(['/cart'])\n    })\n  }\n\n  addToWishlist(product: ProductsData) {\n    // for (let i = 0; i < sessionStorage.length; i++) {\n    //   this.data = sessionStorage.getItem(i.toString())\n    //   this.parsedData = JSON.parse(this.data)\n    //   if (this.parsedData.id === product.id) {\n    //     this.unique = false\n    //     break\n    //   }\n    //   else this.unique = true\n    // }\n    // if (this.unique) sessionStorage.setItem((sessionStorage.length).toString(), JSON.stringify({ id: product.id, img: product.img, title: product.title, price: product.price * this.value, color: this.currentColor, size: this.currentSize, quantity: this.value }))\n\n    this.wishlistService.addToWishlist({ img: product.img, title: product.title, price: product.price, color: \"black\", size: \"S\", quantity: 1 }).subscribe(res => {\n      if(res.status === 200) this.router.navigate(['/wishlist'])\n    })\n  }\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}