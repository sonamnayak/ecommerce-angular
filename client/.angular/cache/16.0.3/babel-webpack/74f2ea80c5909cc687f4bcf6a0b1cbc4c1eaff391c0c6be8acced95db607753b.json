{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { environment as env } from 'src/environments/environment';\nlet ProductsComponent = class ProductsComponent {\n  constructor(productsDataService, searchDataService, activatedRoute, client) {\n    this.productsDataService = productsDataService;\n    this.searchDataService = searchDataService;\n    this.activatedRoute = activatedRoute;\n    this.client = client;\n    this.searchText = \"\";\n    this.unique = true;\n  }\n  ngOnInit() {\n    this.productsDataService.getProducts().subscribe(res => {\n      this.productsData = res;\n      this.currentRoute = this.activatedRoute?.component?.name;\n      this.category = this.activatedRoute.snapshot.paramMap.get(\"cat\");\n      if (this.category) this.productsData = this.productsData.filter(x => x.cat === this.category);else {\n        this.productsData = this.productsData.filter(x => x.bestseller === true);\n        this.productsData.splice(8, this.productsData.length - 8);\n      }\n      this.searchDataService.searchDataEmitter.subscribe(data => this.searchText = data);\n    });\n  }\n  addToCart(product) {\n    for (let i = 1; i <= localStorage.length; i++) {\n      this.data = localStorage.getItem(i.toString());\n      if (this.data != null) {\n        this.parsedData = JSON.parse(this.data);\n        console.log(this.parsedData.id, product.id);\n        if (this.parsedData.id === product.id) {\n          this.unique = false;\n          break;\n        } else this.unique = true;\n      }\n    }\n    if (this.unique) localStorage.setItem(localStorage.length.toString(), JSON.stringify({\n      id: product.id,\n      img: product.img,\n      title: product.title,\n      price: product.price,\n      color: \"black\",\n      size: \"S\",\n      quantity: 1\n    }));\n    return this.client.post(env.apiAddress + '/cart/', JSON.stringify(product));\n  }\n  addToWishlist(product) {\n    for (let i = 0; i < sessionStorage.length; i++) {\n      this.data = sessionStorage.getItem(i.toString());\n      this.parsedData = JSON.parse(this.data);\n      if (this.parsedData.id === product.id) {\n        this.unique = false;\n        break;\n      } else this.unique = true;\n    }\n    if (this.unique) sessionStorage.setItem(sessionStorage.length.toString(), JSON.stringify({\n      id: product.id,\n      img: product.img,\n      title: product.title,\n      price: product.price,\n      color: \"black\",\n      size: \"S\",\n      quantity: 1\n    }));\n  }\n};\nProductsComponent = __decorate([Component({\n  selector: 'app-products',\n  templateUrl: './products.component.html',\n  styleUrls: ['./products.component.css']\n})], ProductsComponent);\nexport { ProductsComponent };","map":{"version":3,"names":["Component","environment","env","ProductsComponent","constructor","productsDataService","searchDataService","activatedRoute","client","searchText","unique","ngOnInit","getProducts","subscribe","res","productsData","currentRoute","component","name","category","snapshot","paramMap","get","filter","x","cat","bestseller","splice","length","searchDataEmitter","data","addToCart","product","i","localStorage","getItem","toString","parsedData","JSON","parse","console","log","id","setItem","stringify","img","title","price","color","size","quantity","post","apiAddress","addToWishlist","sessionStorage","__decorate","selector","templateUrl","styleUrls"],"sources":["C:\\Users\\shinz\\OneDrive\\Desktop\\web\\ecommerce\\client\\src\\app\\home\\products\\products.component.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { ActivatedRoute } from '@angular/router';\nimport { HttpClient, HttpHeaders, HttpResponse } from '@angular/common/http'\nimport { environment as env } from 'src/environments/environment'\nimport { Observable } from 'rxjs';\nimport { ProductsData } from 'src/app/models/products-data.model';\nimport { ProductsDataService } from 'src/app/services/products-data.service';\nimport { SearchDataService } from 'src/app/services/search-data.service';\n\n@Component({\n  selector: 'app-products',\n  templateUrl: './products.component.html',\n  styleUrls: ['./products.component.css']\n})\nexport class ProductsComponent implements OnInit {\n  constructor(private productsDataService: ProductsDataService, private searchDataService: SearchDataService, private activatedRoute: ActivatedRoute, private client: ) { }\n  productsData!: ProductsData[]\n  searchText: string = \"\"\n  category!: string | null\n  currentRoute!: string | undefined\n  data!: any\n  parsedData!: any\n  unique: boolean = true\n\n  ngOnInit(): void {\n    this.productsDataService.getProducts().subscribe(res => {\n      this.productsData = res\n      this.currentRoute = this.activatedRoute?.component?.name\n      this.category = this.activatedRoute.snapshot.paramMap.get(\"cat\")\n      if (this.category) this.productsData = this.productsData.filter(x => x.cat === this.category)\n      else {\n        this.productsData = this.productsData.filter(x => x.bestseller === true)\n        this.productsData.splice(8, this.productsData.length - 8)\n      }\n      this.searchDataService.searchDataEmitter.subscribe((data: string) => this.searchText = data)\n    })\n\n  }\n\n  addToCart(product: ProductsData): Observable<HttpResponse<any>> {\n    for (let i = 1; i <= localStorage.length; i++) {\n      this.data = localStorage.getItem(i.toString())\n      if (this.data != null) {\n        this.parsedData = JSON.parse(this.data)\n        console.log(this.parsedData.id, product.id);\n\n        if (this.parsedData.id === product.id) {\n          this.unique = false\n          break\n        }\n        else this.unique = true\n      }\n    }\n\n    if (this.unique) localStorage.setItem((localStorage.length).toString(), JSON.stringify({ id: product.id, img: product.img, title: product.title, price: product.price, color: \"black\", size: \"S\", quantity: 1 }))\n    return this.client.post(env.apiAddress + '/cart/', JSON.stringify(product))\n  }\n\n  addToWishlist(product: ProductsData) {\n    for (let i = 0; i < sessionStorage.length; i++) {\n      this.data = sessionStorage.getItem(i.toString())\n      this.parsedData = JSON.parse(this.data)\n      if (this.parsedData.id === product.id) {\n        this.unique = false\n        break\n      }\n      else this.unique = true\n    }\n    if (this.unique) sessionStorage.setItem((sessionStorage.length).toString(), JSON.stringify({ id: product.id, img: product.img, title: product.title, price: product.price, color: \"black\", size: \"S\", quantity: 1 }))\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}