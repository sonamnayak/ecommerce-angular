{"ast":null,"code":"const LRUCache = require('lru-cache');\nconst dns = require('dns');\nconst defaultOptions = exports.defaultOptions = {\n  family: undefined,\n  hints: dns.ADDRCONFIG,\n  all: false,\n  verbatim: undefined\n};\nconst lookupCache = exports.lookupCache = new LRUCache({\n  max: 50\n});\n\n// this is a factory so that each request can have its own opts (i.e. ttl)\n// while still sharing the cache across all requests\nexports.getLookup = dnsOptions => {\n  return (hostname, options, callback) => {\n    if (typeof options === 'function') {\n      callback = options;\n      options = null;\n    } else if (typeof options === 'number') {\n      options = {\n        family: options\n      };\n    }\n    options = {\n      ...defaultOptions,\n      ...options\n    };\n    const key = JSON.stringify({\n      hostname,\n      family: options.family,\n      hints: options.hints,\n      all: options.all,\n      verbatim: options.verbatim\n    });\n    if (lookupCache.has(key)) {\n      const [address, family] = lookupCache.get(key);\n      process.nextTick(callback, null, address, family);\n      return;\n    }\n    dnsOptions.lookup(hostname, options, (err, address, family) => {\n      if (err) {\n        return callback(err);\n      }\n      lookupCache.set(key, [address, family], {\n        ttl: dnsOptions.ttl\n      });\n      return callback(null, address, family);\n    });\n  };\n};","map":{"version":3,"names":["LRUCache","require","dns","defaultOptions","exports","family","undefined","hints","ADDRCONFIG","all","verbatim","lookupCache","max","getLookup","dnsOptions","hostname","options","callback","key","JSON","stringify","has","address","get","process","nextTick","lookup","err","set","ttl"],"sources":["C:/Users/shinz/OneDrive/Desktop/web/ecommerce/node_modules/make-fetch-happen/lib/dns.js"],"sourcesContent":["const LRUCache = require('lru-cache')\nconst dns = require('dns')\n\nconst defaultOptions = exports.defaultOptions = {\n  family: undefined,\n  hints: dns.ADDRCONFIG,\n  all: false,\n  verbatim: undefined,\n}\n\nconst lookupCache = exports.lookupCache = new LRUCache({ max: 50 })\n\n// this is a factory so that each request can have its own opts (i.e. ttl)\n// while still sharing the cache across all requests\nexports.getLookup = (dnsOptions) => {\n  return (hostname, options, callback) => {\n    if (typeof options === 'function') {\n      callback = options\n      options = null\n    } else if (typeof options === 'number') {\n      options = { family: options }\n    }\n\n    options = { ...defaultOptions, ...options }\n\n    const key = JSON.stringify({\n      hostname,\n      family: options.family,\n      hints: options.hints,\n      all: options.all,\n      verbatim: options.verbatim,\n    })\n\n    if (lookupCache.has(key)) {\n      const [address, family] = lookupCache.get(key)\n      process.nextTick(callback, null, address, family)\n      return\n    }\n\n    dnsOptions.lookup(hostname, options, (err, address, family) => {\n      if (err) {\n        return callback(err)\n      }\n\n      lookupCache.set(key, [address, family], { ttl: dnsOptions.ttl })\n      return callback(null, address, family)\n    })\n  }\n}\n"],"mappings":"AAAA,MAAMA,QAAQ,GAAGC,OAAO,CAAC,WAAW,CAAC;AACrC,MAAMC,GAAG,GAAGD,OAAO,CAAC,KAAK,CAAC;AAE1B,MAAME,cAAc,GAAGC,OAAO,CAACD,cAAc,GAAG;EAC9CE,MAAM,EAAEC,SAAS;EACjBC,KAAK,EAAEL,GAAG,CAACM,UAAU;EACrBC,GAAG,EAAE,KAAK;EACVC,QAAQ,EAAEJ;AACZ,CAAC;AAED,MAAMK,WAAW,GAAGP,OAAO,CAACO,WAAW,GAAG,IAAIX,QAAQ,CAAC;EAAEY,GAAG,EAAE;AAAG,CAAC,CAAC;;AAEnE;AACA;AACAR,OAAO,CAACS,SAAS,GAAIC,UAAU,IAAK;EAClC,OAAO,CAACC,QAAQ,EAAEC,OAAO,EAAEC,QAAQ,KAAK;IACtC,IAAI,OAAOD,OAAO,KAAK,UAAU,EAAE;MACjCC,QAAQ,GAAGD,OAAO;MAClBA,OAAO,GAAG,IAAI;IAChB,CAAC,MAAM,IAAI,OAAOA,OAAO,KAAK,QAAQ,EAAE;MACtCA,OAAO,GAAG;QAAEX,MAAM,EAAEW;MAAQ,CAAC;IAC/B;IAEAA,OAAO,GAAG;MAAE,GAAGb,cAAc;MAAE,GAAGa;IAAQ,CAAC;IAE3C,MAAME,GAAG,GAAGC,IAAI,CAACC,SAAS,CAAC;MACzBL,QAAQ;MACRV,MAAM,EAAEW,OAAO,CAACX,MAAM;MACtBE,KAAK,EAAES,OAAO,CAACT,KAAK;MACpBE,GAAG,EAAEO,OAAO,CAACP,GAAG;MAChBC,QAAQ,EAAEM,OAAO,CAACN;IACpB,CAAC,CAAC;IAEF,IAAIC,WAAW,CAACU,GAAG,CAACH,GAAG,CAAC,EAAE;MACxB,MAAM,CAACI,OAAO,EAAEjB,MAAM,CAAC,GAAGM,WAAW,CAACY,GAAG,CAACL,GAAG,CAAC;MAC9CM,OAAO,CAACC,QAAQ,CAACR,QAAQ,EAAE,IAAI,EAAEK,OAAO,EAAEjB,MAAM,CAAC;MACjD;IACF;IAEAS,UAAU,CAACY,MAAM,CAACX,QAAQ,EAAEC,OAAO,EAAE,CAACW,GAAG,EAAEL,OAAO,EAAEjB,MAAM,KAAK;MAC7D,IAAIsB,GAAG,EAAE;QACP,OAAOV,QAAQ,CAACU,GAAG,CAAC;MACtB;MAEAhB,WAAW,CAACiB,GAAG,CAACV,GAAG,EAAE,CAACI,OAAO,EAAEjB,MAAM,CAAC,EAAE;QAAEwB,GAAG,EAAEf,UAAU,CAACe;MAAI,CAAC,CAAC;MAChE,OAAOZ,QAAQ,CAAC,IAAI,EAAEK,OAAO,EAAEjB,MAAM,CAAC;IACxC,CAAC,CAAC;EACJ,CAAC;AACH,CAAC"},"metadata":{},"sourceType":"script","externalDependencies":[]}